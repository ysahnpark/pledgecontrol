<?php

class CsvUtilTest extends PHPUnit_Framework_TestCase {

	/**
	 * Test updating an empty policy
	 */
	public function testCsvParsing()
	{
		$data = $this->getAccountCsv();

		$result = Altenia\Ecofy\Util\CsvUtil::toAssociativeArray($data);

		print_r($result);
        
	}

	public function getAccountCsv()
	{
		return '"ID", "Name", "SignupDate", "PledgeStartDate", "PledgeAmount", "Duration", "PaymentPeriod", "PeriodUnit", "AmountPerPeriod", "PaidAmount", "RemainingAmount","ThankyouLetterSentDate"
1,  "A", "2013-10-02", "2013-10-02", 50000.00, 36, 12, "m", 16666.67 , 16700.00, 33200.00, 2013-10-31
2,  "B", "2013-10-02", "2013-10-02", 15000.00, 36,  1, "m",   416.67 ,  1251.00, 13749.00, 2013-10-31
3,  "C", "2013-10-02", "2013-10-02", 20000.00,156,  2, "w",   256.41 ,  1792.00, 18208.00, 2013-10-31
4,  "D", "2013-10-02", "2013-10-02", 15000.00, 36,  6, "m",  2500.00 ,  3000.00, 12000.00, 2013-10-31
5,  "E", "2013-10-02", "2013-10-02", 30000.00, 48, 12, "m",  7500.00 ,  5000.00, 25000.00, 2013-10-31
6,  "F", "2014-04-06", "2014-04-06", 15000.00, 24, 12, "m",  7500.00 , 10000.00,  5000.00, 2014-4-9
7,  "G", "2013-10-02", "2013-10-02", 35000.00, 36,  6, "m",  5833.33 , 10000.00, 25000.00, 2013-10-31
8,  "H", "2013-10-02", "2013-10-02", 60000.00, 36, 12, "m", 20000.00 , 40000.00, 20000.00, 2013-10-31
9,  "I", "2013-10-02", "2013-10-02", 10000.00, 36, 12, "m",  3333.33 ,  3333.00,  6667.00, 2013-10-31
10, "J", "2013-10-21", "2013-10-21", 30000.00, 36, 12, "m", 10000.00 , 10000.00, 20000.00, 2013-10-31
11, "K", "2014-04-06", "2014-04-06",  6000.00, 60, 12, "m",  1200.00 ,  1200.00,  4800.00, 2014-4-9
12, "L", "2013-10-21", "2013-10-21", 30000.00, 36,  2, "w",  1666.67 ,  3850.00, 26150.00, 2013-10-31
13, "M", "2013-11-07", "2013-11-07", 18000.00, 36,  6, "m",  3000.00 ,  3000.00, 15000.00, 2013-11-13
14, "N", "2013-11-07", "2013-11-07", 30000.00, 40,  1, "m",  3000.00 ,  2100.00, 27900.00, 2013-11-13
15, "O", "2013-11-20", "2013-11-20", 10000.00, 36,  4, "m",  1111.11 ,  3000.00,  7000.00, 2013-11-21
16, "P", "2013-11-20", "2013-11-20", 10000.00, 36,  1, "m",   277.78 ,     0.00, 10000.00, 2013-11-21
17, "Q", "2013-11-20", "2013-11-20", 10000.00, 60, 12, "m",  2000.00 ,  2000.00,  8000.00, 2013-11-21
18, "R", "2013-11-20", "2013-11-20",  3000.00, 36,  6, "m",   500.00 ,     0.00,  3000.00, 2013-11-21
19, "S", "2013-11-20", "2013-11-20",  5000.00, 36,  2, "m",   277.78 ,     0.00,  5000.00, 2013-11-21
20, "T", "2013-11-20", "2013-11-20", 10000.00, 36, 12, "m",  3333.33 ,  3500.00,  6500.00, 2013-11-21
		';
	}

	public function getTransactionsCsv()
	{
		return '"Name", "Amount", "PaymentDate"
"A", 16800.00, "2013-11-02"
"B",   416.67, "2013-11-02"
"B",   416.67, "2013-12-02"
"B",   416.67, "2014-3-23" 
"C",   256.41, "2013-11-02"
"C",   256.41, "2013-12-12"
"C",   256.41, "2014-1-12"
"C",   256.41, "2014-2-2"
"C",   256.41, "2014-3-4"
"C",   256.41, "2014-3-23"
"C",   256.41, "2014-4-6"
"D",  3000.00, "2013-11-24"
"E",  5000.00, "2013-9-6"
"F", 10000.00, "2013-12-30"
"G", 10000.00, "2013-12-12"
"H", 20000.00, "2013-12-24"
"H", 20000.00, "2013-12-24"
"I",  3333.00, "2013-12-24"
"J", 10000.00, "2013-12-24"
"K",  1200.00, "2014-04-16"
"L",   384.62, "2013-10-21"
"L",   384.62, "2013-11-21"
"L",   384.62, "2013-12-21"
"L",   384.62, "2014-01-01"
"L",   384.62, "2014-02-01"
"L",   384.62, "2014-03-01"
"L",   384.62, "2014-04-01"
"L",   384.62, "2014-05-01"
"L",   384.62, "2014-05-10"
"L",   384.62, "2014-07-01"
"M",  3000.00, "2013-11-17"
"N",   300.00, "2013-11-07"
"N",   300.00, "2013-12-07"
"N",   300.00, "2014-01-01"
"N",   300.00, "2014-02-02"
"N",   300.00, "2014-03-03"
"N",   300.00, "2014-04-03"
"N",   300.00, "2014-05-02"
"O",  3000.00, "2013-11-25"
"Q",  2000.00, "2013-11-22"
"T",  3500.00, "2013-11-22"';
	}

	public function getAccountNewCsv()
	{
		return '"ID", "Name", "SignupDate", "PledgeStartDate", "PledgeAmount", "Duration", "PaymentPeriod", "PeriodUnit","ThankyouLetterSentDate"
1,  "A", "2013-10-02", "2013-10-02", 50000.00, 36, 12, "m",  2013-10-31
2,  "B", "2013-10-02", "2013-10-02", 15000.00, 36,  1, "m",  2013-10-31
3,  "C", "2013-10-02", "2013-10-02", 20000.00,156,  2, "w",  2013-10-31
4,  "D", "2013-10-02", "2013-10-02", 15000.00, 36,  6, "m",  2013-10-31
5,  "E", "2013-10-02", "2013-10-02", 30000.00, 48, 12, "m",  2013-10-31
6,  "F", "2014-04-06", "2014-04-06", 15000.00, 24, 12, "m",  2014-4-9
7,  "G", "2013-10-02", "2013-10-02", 35000.00, 36,  6, "m",  2013-10-31
8,  "H", "2013-10-02", "2013-10-02", 60000.00, 36, 12, "m",  2013-10-31
9,  "I", "2013-10-02", "2013-10-02", 10000.00, 36, 12, "m",  2013-10-31
10, "J", "2013-10-21", "2013-10-21", 30000.00, 36, 12, "m",  2013-10-31
11, "K", "2014-04-06", "2014-04-06",  6000.00, 60, 12, "m",  2014-4-9
12, "L", "2013-10-21", "2013-10-21", 30000.00, 36,  2, "w",  2013-10-31
13, "M", "2013-11-07", "2013-11-07", 18000.00, 36,  6, "m",  2013-11-13
14, "N", "2013-11-07", "2013-11-07", 30000.00, 40,  1, "m",  2013-11-13
15, "O", "2013-11-20", "2013-11-20", 10000.00, 36,  4, "m",  2013-11-21
16, "P", "2013-11-20", "2013-11-20", 10000.00, 36,  1, "m",  2013-11-21
17, "Q", "2013-11-20", "2013-11-20", 10000.00, 60, 12, "m",  2013-11-21
18, "R", "2013-11-20", "2013-11-20",  3000.00, 36,  6, "m",  2013-11-21
19, "S", "2013-11-20", "2013-11-20",  5000.00, 36,  2, "m",  2013-11-21
20, "T", "2013-11-20", "2013-11-20", 10000.00, 36, 12, "m",  2013-11-21
		';
	}

}